"use strict";(self["webpackChunkkadi_tidi"]=self["webpackChunkkadi_tidi"]||[]).push([[535],{8941:function(e,a,r){r.d(a,{V:function(){return s}});var l=r(3396);const t={generalErrorMessage:{fieldIsRequired:"field is required"},authErrorMessage:{emailError:"The email field must be a valid email",passwordValid:"The password field must be at least 8 characters",validPassRegex:"Passwords must be at least 8 characters long, and contain at least 1 alphabet,1 uppercase, 1 numeric, and 1 special character",confirmPasswordValid:"The confirm password confirmation does not match",validCharacters:"The first name field may only contain alphabetic characters as well as spaces",minMust:"must be at least 3 characters"},companyErrorMessage:{phoneNumberValid:"The phone number field must be at least 10 characters"},email:"Email",password:"Password",firstName:"first name",lastName:"last name",phoneNumber:"phone number"};function s(){function e({field:e={},name:a="",validations:r="",type:l="string",event:s=null}){return new Promise(((o,n)=>{try{let n=""!==r?r.split("|").map((e=>e.trim())):"",i=!0,u="number"===l?"digits":"characters";if(n.length){if(n.filter((e=>e.includes("required"))).length&&(null!==s?""!==s.target.value.trim()&&null!==s.target.value.trim()&&!1!==s.target.value||(i=!1,e.error=`The ${a.toLowerCase()} ${t.generalErrorMessage.fieldIsRequired}`):""!==e.value&&null!==e.value&&!1!==e.value||(i=!1,e.error=`The ${a.toLowerCase()} ${t.generalErrorMessage.fieldIsRequired}`)),n.filter((e=>e.includes("regex"))).length&&i){let r=n.findIndex((e=>e.includes("regex")));if(-1!==r){let l=n[r].split(":").pop().trim()||"";l.length?(l=new RegExp(l),null!==s?l.test(s.target.value.trim())||(i=!1,e.error=a==t.password&&e.value.toString().length<8?t.authErrorMessage.passwordValid:a==t.password&&e.value.toString().length>=8?t.authErrorMessage.validPassRegex:a==t.email?t.authErrorMessage.emailError:a==t.firstName||a==t.lastName?t.authErrorMessage.validCharacters:`The ${a.toLowerCase()} field must be a valid ${a.toLowerCase()}`):l.test(e.value)||(i=!1,e.error=a==t.password&&e.value.toString().length<8?t.authErrorMessage.passwordValid:a==t.password&&e.value.toString().length>=8?t.authErrorMessage.validPassRegex:a==t.email?t.authErrorMessage.emailError:a==t.firstName||a==t.lastName?t.authErrorMessage.validCharacters:`The ${a.toLowerCase()} field must be a valid ${a.toLowerCase()}`)):console.warn("No regex found!")}}if(n.filter((e=>e.includes("min"))).length&&i){let r=n.findIndex((e=>e.includes("min")));if(-1!==r){let l=Number(n[r].split(":").pop());null!==s?s.target.value.trim().toString().length<l&&(i=!1,e.error=a===t.phoneNumber?t.companyErrorMessage.phoneNumberValid:`The ${a.toLowerCase()} field must be at least ${l} ${u}`):e.value.toString().length<l&&(i=!1,e.error=a===t.phoneNumber?t.companyErrorMessage.phoneNumberValid:`The ${a.toLowerCase()} field must be at least ${l} ${u}`)}}if(n.filter((e=>e.includes("max"))).length&&i){let r=n.findIndex((e=>e.includes("max")));if(-1!==r){let l=Number(n[r].split(":").pop());null!==s?s.target.value.trim().toString().length>l&&(i=!1,e.error=`${a} must be less than ${l} ${u}`):e.value.toString().length>l&&(i=!1,e.error=`${a} must be less than ${l} ${u}`)}}if(n.filter((e=>e.includes("confirmation"))).length&&i){let a=n.findIndex((e=>e.includes("confirmation")));if(-1!==a){let r=n[a].split(":").pop().trim()||"";r.length?null!==s?s.target.value.trim()!==r&&(i=!1,e.error=`${t.authErrorMessage.confirmPasswordValid}`):e.value!==r&&(i=!1,e.error=`${t.authErrorMessage.confirmPasswordValid}`):console.warn("No confirmation field found!")}}i&&(e.error="")}o(i)}catch(i){n(i)}}))}function a(a){return new Promise(((r,t)=>{try{let t=!0;Object.keys(a).forEach((r=>{e({field:a[r],name:a[r].name,validations:a[r].rules,type:a[r].type}).then((e=>{!1===e&&(t=!1)})).catch((e=>{console.error("ERROR in check validation: ",e)}))})),(0,l.Y3)((()=>{r(t)}))}catch(s){t(s)}}))}return{checkAllFields:a,checkErrors:e}}},3790:function(e,a,r){r.r(a),r.d(a,{default:function(){return x}});r(560);var l=r(3396),t=r(4870),s=r(9242),o=r(7139),n=r(8941),i=r(8113),u=r(2483),d=r(4237);const c={style:{height:"100%",width:"100%"},class:"d-flex align-items-center justify-content-center flex-column"},m={class:"mb-30px d-flex flex-column position-re"},v=(0,l._)("label",{for:""},"Email",-1),p={key:0,class:"invalid-feedback red"},f={class:"mb-30px d-flex flex-column position-re"},w=(0,l._)("label",{for:""},"Password",-1),h={key:0,class:"invalid-feedback red"};var y={__name:"Login",setup(e){const a=new i.gV({id:"kadi-tidi-wbwnt"}),r=(0,u.tv)(),y=(0,u.yj)(),{checkAllFields:g,checkErrors:x}=(0,n.V)(),b=(0,d.useToast)();(0,l.aZ)({name:"Login-Component"});const k=(0,t.iH)({email:{value:"",rules:"required | regex: \\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+",name:"email",error:""},password:{value:"",rules:"required | regex: ^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-]).*$ | min:8",name:"password",error:""}});function E(){g(k.value).then((e=>{if(e){const e=i.cN.emailPassword(k.value.email.value,k.value.password.value);a.logIn(e).then((async()=>{y.query.redirect_url&&"/login"!==y.query.redirect_url?r.replace(y.query.redirect_url).then((()=>{window.location.reload()})):(window.location.reload(),r.push({name:"Home"})),setTimeout((()=>{window.location.reload()}))})).catch((e=>{"invalid username/password"==e.error?b.error("Invalid username or password.",{position:"top-right"}):b.error(`${e.error}`,{position:"top-right"}),console.error("ERROR in login: ",e)}))}})).catch((e=>{console.error("ERROR: ",e)}))}return(e,a)=>{const r=(0,l.up)("router-link");return(0,l.wg)(),(0,l.iD)("div",c,[(0,l._)("div",m,[v,(0,l.wy)((0,l._)("input",{type:"email","onUpdate:modelValue":a[0]||(a[0]=e=>k.value.email.value=e),placeholder:"Enter email",class:"form-control",style:{width:"250px"},onKeyup:a[1]||(a[1]=e=>(0,t.SU)(x)({field:k.value.email,name:k.value.email.name,validations:k.value.email.rules,type:k.value.email.type,event:e}))},null,544),[[s.nr,k.value.email.value]]),k.value.email.error?((0,l.wg)(),(0,l.iD)("span",p,(0,o.zw)(k.value.email.error),1)):(0,l.kq)("",!0)]),(0,l._)("div",f,[w,(0,l.wy)((0,l._)("input",{type:"password",placeholder:"Enter password","onUpdate:modelValue":a[2]||(a[2]=e=>k.value.password.value=e),class:"form-control",style:{width:"250px"},onKeyup:a[3]||(a[3]=e=>(0,t.SU)(x)({field:k.value.password,name:k.value.password.name,validations:k.value.password.rules,type:k.value.password.type,event:e}))},null,544),[[s.nr,k.value.password.value]]),k.value.password.error?((0,l.wg)(),(0,l.iD)("span",h,(0,o.zw)(k.value.password.error),1)):(0,l.kq)("",!0)]),(0,l._)("button",{class:"btn btn-primary",onClick:a[4]||(a[4]=e=>E())}," Login "),(0,l.Wm)(r,{to:"/signup",class:"mt-1"},{default:(0,l.w5)((()=>[(0,l.Uk)("Signup")])),_:1})])}}};const g=y;var x=g},4372:function(e,a,r){r.r(a),r.d(a,{default:function(){return K}});var l=r(3396),t=r(4870),s=r(9242),o=r(7139),n=r(4724),i=r(8941),u=r(5036),d=r(2483),c=r(4237);const m={style:{height:"100%",width:"100%"},class:"d-flex align-items-center justify-content-center flex-column"},v={class:"mb-30px d-flex flex-column position-re"},p=(0,l._)("label",{for:""},"Email",-1),f={key:0,class:"invalid-feedback red"},w={class:"mb-30px d-flex flex-column position-re"},h=(0,l._)("label",{for:""},"Username",-1),y={key:0,class:"invalid-feedback red"},g={class:"mb-30px d-flex flex-column position-re"},x=(0,l._)("label",{for:""},"Full name",-1),b={key:0,class:"invalid-feedback red"},k={class:"mb-30px d-flex flex-column position-re"},E=(0,l._)("label",{for:""},"Country",-1),_={key:0,class:"invalid-feedback red"},q={class:"mb-30px d-flex flex-column position-re"},$=(0,l._)("label",{for:""},"State",-1),P={key:0,class:"invalid-feedback red"},N={class:"mb-30px d-flex flex-column position-re"},S=(0,l._)("label",{for:""},"City",-1),R={key:0,class:"invalid-feedback red"},U={class:"mb-30px d-flex flex-column position-re"},V=(0,l._)("label",{for:""},"Password",-1),C={key:0,class:"invalid-feedback red"},T={class:"mb-30px d-flex flex-column position-re"},M=(0,l._)("label",{for:""},"Confirm password",-1),z={key:0,class:"invalid-feedback red"};var L={__name:"Signup",setup(e){(0,l.aZ)({name:"Signup-Component"});const{checkErrors:a,checkAllFields:r}=(0,i.V)(),L=(0,d.tv)(),D=(0,c.useToast)(),K=(0,t.iH)({email:{value:"",rules:"required | regex: \\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+",name:"email",error:""},userName:{value:"",rules:"required | regex: ^[A-Za-z0-9]*$",name:"username",error:""},name:{value:"",rules:"required",name:"Full name",error:""},country:{value:"",rules:"required",name:"country",error:""},state:{value:"",rules:"required",name:"state",error:""},city:{value:"",rules:"required",name:"city",error:""},password:{value:"",rules:"required | regex: ^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-]).*$ | min:8",name:"password",error:""},confirmPassword:{value:"",rules:"required",name:"confirm password",error:""}}),I=(0,t.iH)(""),A=()=>{""!==K.value.confirmPassword.value&&(""===K.value.confirmPassword.value?I.value="The confirm password field is required":K.value.password.value!==K.value.confirmPassword.value?I.value="The confirm password confirmation does not match":I.value="")},O=()=>{""===K.value.confirmPassword.value?I.value="The confirm password field is required":K.value.password.value!==K.value.confirmPassword.value?I.value="The confirm password confirmation does not match":I.value=""};function j(){try{K.value.password.value!==K.value.confirmPassword.value&&(I.value="The confirm password confirmation does not match"),r(K.value).then((e=>{if(e&&""===I.value){const e={};Object.keys(K.value||{}).forEach((a=>{e[a]=K.value[a]?.value})),u.N.post(`${n.qK}`,e).then((e=>e.data)).then((e=>{e.status&&(D.success(e?.statusText,{position:"top-right"}),L.replace({name:"Login"}))})).catch((e=>{D.error("Someting went wrong",{position:"top-right"}),console.error("ERROR: ",e)}))}})).catch((e=>{D.error("Someting went wrong",{position:"top-right"}),console.error("ERROR: ",e)}))}catch(e){D.error("Someting went wrong",{position:"top-right"}),console.log("CATCH ERR: ",e)}}return(e,r)=>{const n=(0,l.up)("router-link");return(0,l.wg)(),(0,l.iD)("div",m,[(0,l._)("div",v,[p,(0,l.wy)((0,l._)("input",{type:"email","onUpdate:modelValue":r[0]||(r[0]=e=>K.value.email.value=e),placeholder:"Enter email",class:"form-control",style:{width:"250px"},onKeyup:r[1]||(r[1]=e=>(0,t.SU)(a)({field:K.value.email,name:K.value.email.name,validations:K.value.email.rules,type:K.value.email.type,event:e}))},null,544),[[s.nr,K.value.email.value]]),K.value.email.error?((0,l.wg)(),(0,l.iD)("span",f,(0,o.zw)(K.value.email.error),1)):(0,l.kq)("",!0)]),(0,l._)("div",w,[h,(0,l.wy)((0,l._)("input",{type:"text","onUpdate:modelValue":r[2]||(r[2]=e=>K.value.userName.value=e),class:"form-control",placeholder:"Enter username",style:{width:"250px"},onKeyup:r[3]||(r[3]=e=>(0,t.SU)(a)({field:K.value.userName,name:K.value.userName.name,validations:K.value.userName.rules,type:K.value.userName.type,event:e}))},null,544),[[s.nr,K.value.userName.value,void 0,{trim:!0}]]),K.value.userName.error?((0,l.wg)(),(0,l.iD)("span",y,(0,o.zw)(K.value.userName.error),1)):(0,l.kq)("",!0)]),(0,l._)("div",g,[x,(0,l.wy)((0,l._)("input",{type:"text",placeholder:"Enter full name","onUpdate:modelValue":r[4]||(r[4]=e=>K.value.name.value=e),class:"form-control",style:{width:"250px"},onKeyup:r[5]||(r[5]=e=>(0,t.SU)(a)({field:K.value.name,name:K.value.name.name,validations:K.value.name.rules,type:K.value.name.type,event:e}))},null,544),[[s.nr,K.value.name.value]]),K.value.name.error?((0,l.wg)(),(0,l.iD)("span",b,(0,o.zw)(K.value.name.error),1)):(0,l.kq)("",!0)]),(0,l._)("div",k,[E,(0,l.wy)((0,l._)("input",{type:"text","onUpdate:modelValue":r[6]||(r[6]=e=>K.value.country.value=e),class:"form-control",style:{width:"250px"},placeholder:"Enter country",onKeyup:r[7]||(r[7]=e=>(0,t.SU)(a)({field:K.value.country,name:K.value.country.name,validations:K.value.country.rules,type:K.value.country.type,event:e}))},null,544),[[s.nr,K.value.country.value]]),K.value.country.error?((0,l.wg)(),(0,l.iD)("span",_,(0,o.zw)(K.value.country.error),1)):(0,l.kq)("",!0)]),(0,l._)("div",q,[$,(0,l.wy)((0,l._)("input",{type:"text",placeholder:"Enter state","onUpdate:modelValue":r[8]||(r[8]=e=>K.value.state.value=e),class:"form-control",style:{width:"250px"},onKeyup:r[9]||(r[9]=e=>(0,t.SU)(a)({field:K.value.state,name:K.value.state.name,validations:K.value.state.rules,type:K.value.state.type,event:e}))},null,544),[[s.nr,K.value.state.value]]),K.value.state.error?((0,l.wg)(),(0,l.iD)("span",P,(0,o.zw)(K.value.state.error),1)):(0,l.kq)("",!0)]),(0,l._)("div",N,[S,(0,l.wy)((0,l._)("input",{type:"text",placeholder:"Enter city","onUpdate:modelValue":r[10]||(r[10]=e=>K.value.city.value=e),class:"form-control",style:{width:"250px"},onKeyup:r[11]||(r[11]=e=>(0,t.SU)(a)({field:K.value.city,name:K.value.city.name,validations:K.value.city.rules,type:K.value.city.type,event:e}))},null,544),[[s.nr,K.value.city.value]]),K.value.city.error?((0,l.wg)(),(0,l.iD)("span",R,(0,o.zw)(K.value.city.error),1)):(0,l.kq)("",!0)]),(0,l._)("div",U,[V,(0,l.wy)((0,l._)("input",{type:"password",placeholder:"Enter password","onUpdate:modelValue":r[12]||(r[12]=e=>K.value.password.value=e),class:"form-control",style:{width:"250px"},onKeyup:r[13]||(r[13]=e=>((0,t.SU)(a)({field:K.value.password,name:K.value.password.name,validations:K.value.password.rules,type:K.value.password.type,event:e}),A()))},null,544),[[s.nr,K.value.password.value]]),K.value.password.error?((0,l.wg)(),(0,l.iD)("span",C,(0,o.zw)(K.value.password.error),1)):(0,l.kq)("",!0)]),(0,l._)("div",T,[M,(0,l.wy)((0,l._)("input",{type:"password",placeholder:"Enter confirm password","onUpdate:modelValue":r[14]||(r[14]=e=>K.value.confirmPassword.value=e),class:"form-control",style:{width:"250px"},onKeyup:r[15]||(r[15]=e=>((0,t.SU)(a)({field:K.value.confirmPassword,name:K.value.confirmPassword.name,validations:K.value.confirmPassword.rules,type:K.value.confirmPassword.type,event:e}),O()))},null,544),[[s.nr,K.value.confirmPassword.value]]),K.value.confirmPassword.error||I.value?((0,l.wg)(),(0,l.iD)("span",z,(0,o.zw)(K.value.confirmPassword.error||I.value),1)):(0,l.kq)("",!0)]),(0,l._)("button",{class:"btn btn-primary",onClick:r[16]||(r[16]=e=>j())}," Signup "),(0,l.Wm)(n,{to:"/",class:"mt-1"},{default:(0,l.w5)((()=>[(0,l.Uk)("Login")])),_:1})])}}};const D=L;var K=D}}]);
//# sourceMappingURL=login.01c0ee7c.js.map